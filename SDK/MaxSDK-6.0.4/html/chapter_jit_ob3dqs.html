<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Max 6 API</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
	<div id="c74header">
		<img src="header.png" height="200" />
	</div>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('chapter_jit_ob3dqs.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">OB3D QuickStart </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The purpose of this chapter is to give a quick and high level overview of how to develop a simple Jitter OpenGL object which draws geometry within a named rendering context - we refer to such an object as an OB3D.</p>
<p>For this task, we will use the jit.gl.simple SDK example. More details such as how to make an OpenGL object which deals with resources such as display lists and textures, wishes to support matrix input/output, or needs greater access to OpenGL state will appear in the following chapter. This chapter assumes familiarity with Jitter's OpenGL object suite used from the Max patcher, as discussed in the Jitter Tutorial, and the preceding chapters on the Jitter object model and Max wrapper classes.</p>
<h2><a class="anchor" id="chapter_jit_ob3dqs_classdef"></a>
Defining the OB3D Jitter Class</h2>
<p>Jitter OB3Ds typically are defined to have all or most of the common OB3D attributes and methods discussed in the Group-OB3D section of the Jitter HTML object reference. These include attributes and methods to set the rendering destination name, object name, color, lighting, texturing, modelview transform, depth buffering, polygon mode, and several other common tasks. These common attributes and methods are added by the call to the <a class="el" href="group__ob3dmod.html#gaee60152a1d507a630e14f0e4f71e86f2" title="Adds default methods and attributes to the OB3D class.">jit_ob3d_setup()</a> function in your Jitter class definition, after calling jit_class_new, but typically prior to defining other methods and attributes. For an OB3D, Jitter needs to store additional information in your object. This information is stored in an opaque pointer in your object struct, typically named ob3d. The byte offset to your OB3D data pointer is passed into <a class="el" href="group__ob3dmod.html#gaee60152a1d507a630e14f0e4f71e86f2" title="Adds default methods and attributes to the OB3D class.">jit_ob3d_setup()</a>. You can override any default attributes and methods added by <a class="el" href="group__ob3dmod.html#gaee60152a1d507a630e14f0e4f71e86f2" title="Adds default methods and attributes to the OB3D class.">jit_ob3d_setup()</a> with the following flags:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#define JIT_OB3D_NO_ROTATION_SCALE      1 &lt;&lt; 0</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_POLY_VARS         1 &lt;&lt; 1</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_BLEND              1 &lt;&lt; 2</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_TEXTURE         1 &lt;&lt; 3</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_MATRIXOUTPUT      1 &lt;&lt; 4</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_AUTO_ONLY         1 &lt;&lt; 5</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_DOES_UI         1 &lt;&lt; 6</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_DEPTH         1 &lt;&lt; 7</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_ANTIALIAS         1 &lt;&lt; 8</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_FOG            1 &lt;&lt; 9</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_NO_LIGHTING_MATERIAL      1 &lt;&lt; 10</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_HAS_LIGHTS         1 &lt;&lt; 11</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_HAS_CAMERA         1 &lt;&lt; 12</span>
<span class="preprocessor"></span><span class="preprocessor">#define JIT_OB3D_IS_RENDERER         1 &lt;&lt; 13</span>
<span class="preprocessor">#define JIT_OB3D_NO_COLOR         1 &lt;&lt; 14</span>
</pre></div><p>Aside from the attributes and methods added to your class by <a class="el" href="group__ob3dmod.html#gaee60152a1d507a630e14f0e4f71e86f2" title="Adds default methods and attributes to the OB3D class.">jit_ob3d_setup()</a>, you need to define a private, untyped method bound to the symbol ob3d_draw. This method is where your object does all its drawing. It is called by the standard OB3D draw and drawraw methods. The OB3D draw method sets up all of the OpenGL state associated with the common OB3D attributes before calling your private ob3d_draw method. The drawraw method simply sets the context before calling your private ob3d_draw method. Because OB3Ds support being named for use within jit.gl.sketch*'s drawobject command, you must also add a private, untyped "register" method associated with the <a class="el" href="group__objectmod.html#gabcf088a00f36b6af8ce5896b81e4d0ef" title="Registers an object in the named object registry.">jit_object_register()</a> function. Let's examine the *jit.gl.simple SDK project as an example:</p>
<div class="fragment"><pre class="fragment">t_jit_err jit_gl_simple_init(<span class="keywordtype">void</span>) 
{
   <span class="keywordtype">long</span> ob3d_flags = <a class="code" href="group__jitter.html#ga015276252d0ad61f9f35ad1ea227d089" title="ob3d flag">JIT_OB3D_NO_MATRIXOUTPUT</a>; <span class="comment">// no matrix output</span>
   <span class="keywordtype">void</span> *ob3d;
   
   _jit_gl_simple_class = <a class="code" href="group__classmod.html#ga6c1c213a5c883bf32d0f22678ce2f02b" title="Creates a new class with the name specified by the name argument.">jit_class_new</a>(<span class="stringliteral">&quot;jit_gl_simple&quot;</span>, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)jit_gl_simple_new, (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)jit_gl_simple_free,
      <span class="keyword">sizeof</span>(t_jit_gl_simple),0L);
   
   <span class="comment">// set up object extension for 3d object, customized with flags</span>
   ob3d = <a class="code" href="group__ob3dmod.html#gaee60152a1d507a630e14f0e4f71e86f2" title="Adds default methods and attributes to the OB3D class.">jit_ob3d_setup</a>(_jit_gl_simple_class, 
            <a class="code" href="group__misc.html#gaad95899dfbc7b5b8fe11921643ef46f0" title="Find byte offset of a named member of a struct, relative to the beginning of that struct...">calcoffset</a>(t_jit_gl_simple, ob3d), 
            ob3d_flags);
   
   <span class="comment">// define the OB3D draw method.  called in automatic mode by </span>
   <span class="comment">// jit.gl.render or otherwise through ob3d when banged. this </span>
   <span class="comment">// method is A_CANT because our draw setup needs to happen </span>
   <span class="comment">// in the ob3d beforehand to initialize OpenGL state </span>
   <a class="code" href="group__classmod.html#gab3b84bc08f9f3ee0b29010f653c5ea77" title="Adds a named method to a class.">jit_class_addmethod</a>(_jit_gl_simple_class, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)jit_gl_simple_draw, <span class="stringliteral">&quot;ob3d_draw&quot;</span>, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47af48193ec36e53b1507d81c49873c8d7a" title="cannot typecheck args">A_CANT</a>, 0L);
   
   <span class="comment">// define the dest_closing and dest_changed methods. </span>
   <span class="comment">// these methods are called by jit.gl.render when the </span>
   <span class="comment">// destination context closes or changes: for example, when </span>
   <span class="comment">// the user moves the window from one monitor to another. Any </span>
   <span class="comment">// resources your object keeps in the OpenGL machine </span>
   <span class="comment">// (e.g. textures, display lists, vertex shaders, etc.) </span>
   <span class="comment">// will need to be freed when closing, and rebuilt when it has </span>
   <span class="comment">// changed. In this object, these functions do nothing, and </span>
   <span class="comment">// could be omitted.</span>
   <a class="code" href="group__classmod.html#gab3b84bc08f9f3ee0b29010f653c5ea77" title="Adds a named method to a class.">jit_class_addmethod</a>(_jit_gl_simple_class, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)jit_gl_simple_dest_closing, <span class="stringliteral">&quot;dest_closing&quot;</span>, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47af48193ec36e53b1507d81c49873c8d7a" title="cannot typecheck args">A_CANT</a>, 0L);
   <a class="code" href="group__classmod.html#gab3b84bc08f9f3ee0b29010f653c5ea77" title="Adds a named method to a class.">jit_class_addmethod</a>(_jit_gl_simple_class, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)jit_gl_simple_dest_changed, <span class="stringliteral">&quot;dest_changed&quot;</span>, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47af48193ec36e53b1507d81c49873c8d7a" title="cannot typecheck args">A_CANT</a>, 0L);
   
   <span class="comment">// must register for ob3d use</span>
   <a class="code" href="group__classmod.html#gab3b84bc08f9f3ee0b29010f653c5ea77" title="Adds a named method to a class.">jit_class_addmethod</a>(_jit_gl_simple_class, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)<a class="code" href="group__objectmod.html#gabcf088a00f36b6af8ce5896b81e4d0ef" title="Registers an object in the named object registry.">jit_object_register</a>, <span class="stringliteral">&quot;register&quot;</span>, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47af48193ec36e53b1507d81c49873c8d7a" title="cannot typecheck args">A_CANT</a>, 0L);

   <a class="code" href="group__classmod.html#ga1cf03eba09d7b3b53a8cde269c47765d" title="Registers class in the class registry.">jit_class_register</a>(_jit_gl_simple_class);

   <span class="keywordflow">return</span> JIT_ERR_NONE;
}
</pre></div><h2><a class="anchor" id="chapter_jit_ob3dqs_ctordtor"></a>
The Jitter Class Constructor/Destructor</h2>
<p>In your OB3D Jitter Class constructor, you need to pass in your rendering destination name as the first argument. You should call the <a class="el" href="group__ob3dmod.html#gac27d63b4d66faf27fda165792dafa223" title="Allocates and initializes OB3D resources.">jit_ob3d_new()</a> function with your destination name argument to initialize the OB3D data pointer, associating it with your rendering destination. In your destructor, you need to free your OB3D data pointer with <a class="el" href="group__ob3dmod.html#ga5c1537df19c2d7e12ef809d3de3943d9" title="Disposes OB3D resources.">jit_ob3d_free()</a>. The jit.gl.simple constructor and destructors are below as an example.</p>
<div class="fragment"><pre class="fragment">t_jit_gl_simple *jit_gl_simple_new(<a class="code" href="structt__symbol.html" title="The symbol.">t_symbol</a> *dest_name)
{
   t_jit_gl_simple *x;

   <span class="comment">// make jit object</span>
   <span class="keywordflow">if</span> (x = (t_jit_gl_simple *)jit_object_alloc(_jit_gl_simple_class)) 
   {
      <span class="comment">// create and attach ob3d</span>
      <a class="code" href="group__ob3dmod.html#gac27d63b4d66faf27fda165792dafa223" title="Allocates and initializes OB3D resources.">jit_ob3d_new</a>(x, dest_name);
   } 
   <span class="keywordflow">else</span> 
   {
      x = NULL;
   }   
   <span class="keywordflow">return</span> x;
}


<span class="keywordtype">void</span> jit_gl_simple_free(t_jit_gl_simple *x)
{
   <span class="comment">// free ob3d data </span>
   <a class="code" href="group__ob3dmod.html#ga5c1537df19c2d7e12ef809d3de3943d9" title="Disposes OB3D resources.">jit_ob3d_free</a>(x);
}
</pre></div><h2><a class="anchor" id="chapter_jit_ob3dqs_draw"></a>
The OB3D draw Method</h2>
<p>Your OB3D draw method, bound to the ob3d_draw symbol, is where all of your drawing code takes place. It is called automatically when your associated jit.gl.render object receives a bang, if your automatic and enabled attributes are turned on, as they are by default. It is also called if your Max wrapper object receives a bang, or the draw or drawraw messages. With the exception of the drawraw message, all of the standard OB3D object state is setup prior to calling your ob3d_draw method, so you needn't setup things like the modelview transform, color, lighting properties, texture information, if your object doesn't have special needs. The following example from jit.gl.simple, just draws a simple quadrilateral.</p>
<div class="fragment"><pre class="fragment">t_jit_err jit_gl_simple_draw(t_jit_gl_simple *x)
{
   t_jit_err result = JIT_ERR_NONE;
   
   <span class="comment">// draw our OpenGL geometry. </span>
   glBegin(GL_QUADS);
   glVertex3f(-1,-1,0);
   glVertex3f(-1,1,0);
   glVertex3f(1,1,0);
   glVertex3f(1,-1,0);
   glEnd();
   
   <span class="keywordflow">return</span> result;
}
</pre></div><p>Since this example is meant only to show a minimal object which draws geometry with standard OpenGL calls, there is no texture information or vertex normals specified. However, all standard OpenGL calls should work within the ob3d_draw method. This example also doesn't show matrix output, as accomplished by <a class="el" href="group__ob3dmod.html#gacb2a2ba1b2bb33377aa10b45bb3a0531" title="Draws one t_jit_glchunk If the OB3D is not in matrixoutput mode, the drawing call is made directly to...">jit_ob3d_draw_chunk()</a>, which will be discussed in the following chapter on OB3D details.</p>
<h2><a class="anchor" id="chapter_jit_ob3dqs_maxwrap"></a>
Defining the OB3D Max Wrapper Class</h2>
<p>For OB3Ds, the Max wrapper class has less extra work than for MOPs. In your Max wrapper class definition, you need only add a call to the <a class="el" href="group__ob3dmod.html#ga6bb6d0a3847efb08150eb752257f8be9" title="Adds default methods and OB3D Max wrapper class.">max_ob3d_setup()</a> function to add your standard drawing methods, and the <a class="el" href="group__ob3dmod.html#ga8fa7e82f9a1f64c2e5d10b2dbf340536" title="Default OB3D Max wrapper assistance method.">max_jit_ob3d_assist()</a> function as your assist method, unless you wish to define your own custom assist method. Everything else is similar to the standard technique of wrapping a Jitter Class demonstrated in the Max Wrapper Class chapter.</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> main(<span class="keywordtype">void</span>)
{   
   <span class="keywordtype">void</span> *classex, *jitclass;
   
   <span class="comment">// initialize Jitter class</span>
   jit_gl_simple_init();   
   
   <span class="comment">// create Max class</span>
   <a class="code" href="group__class__old.html#ga24bbc5a9e8f7bb0a1c6847326e2f0a20" title="Use the setup() function to initialize your class by informing Max of its size, the name of your func...">setup</a>((<a class="code" href="structt__messlist.html" title="A list of symbols and their corresponding methods, complete with typechecking information.">t_messlist</a> **)&amp;max_jit_gl_simple_class, 
      (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)max_jit_gl_simple_new, (<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)max_jit_gl_simple_free, 
      (<span class="keywordtype">short</span>)<span class="keyword">sizeof</span>(t_max_jit_gl_simple), 0L, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47a81c1a8550f038db16a619167a70a79b6" title="request that args be passed as an array, the routine will check the types itself.">A_GIMME</a>, 0);

   <span class="comment">// specify a byte offset to keep additional information about our object</span>
   classex = <a class="code" href="group__maxwrapmod.html#ga773b6e6430d9de2e295419c7f038979e" title="Allocates and initializes special t_max_jit_classex data, used by the Max wrapper class...">max_jit_classex_setup</a>(<a class="code" href="group__misc.html#gaad95899dfbc7b5b8fe11921643ef46f0" title="Find byte offset of a named member of a struct, relative to the beginning of that struct...">calcoffset</a>(t_max_jit_gl_simple, obex));

   <span class="comment">// look up Jitter class in the class registry</span>
   jitclass = <a class="code" href="group__classmod.html#ga63eb9d25f881cd6fba11e24f9ac9b02f" title="Retrieves class pointer associated with name provided.">jit_class_findbyname</a>(<a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb" title="Given a C-string, fetch the matching t_symbol pointer from the symbol table, generating the symbol if...">gensym</a>(<span class="stringliteral">&quot;jit_gl_simple&quot;</span>));   
   
   <span class="comment">// wrap Jitter class with the standard methods for Jitter objects</span>
   <a class="code" href="group__maxwrapmod.html#ga9b8377bdccc2497e02582c72204b5250" title="Adds standard Jitter methods, as well as public methods and attributes of the specified Jitter class...">max_jit_classex_standard_wrap</a>(classex, jitclass, 0);    
                
      <span class="comment">// use standard ob3d assist method</span>
   <a class="code" href="group__class__old.html#ga0d9bfa416fdd861d1b2fd2d17701cbb3" title="Use addmess() to bind a function to a message other than the standard ones covered by addbang()...">addmess</a>((<a class="code" href="group__datatypes.html#gac26ba0a173b50597f5738132e059b42d" title="Function pointer type for generic methods.">method</a>)<a class="code" href="group__ob3dmod.html#ga8fa7e82f9a1f64c2e5d10b2dbf340536" title="Default OB3D Max wrapper assistance method.">max_jit_ob3d_assist</a>, <span class="stringliteral">&quot;assist&quot;</span>, <a class="code" href="group__atom.html#gga8aa6700e9f00b132eb376db6e39ade47af48193ec36e53b1507d81c49873c8d7a" title="cannot typecheck args">A_CANT</a>,0);  

   <span class="comment">// add methods for 3d drawing</span>
   <a class="code" href="group__ob3dmod.html#ga6bb6d0a3847efb08150eb752257f8be9" title="Adds default methods and OB3D Max wrapper class.">max_ob3d_setup</a>();
}
</pre></div><h2><a class="anchor" id="chapter_jit_ob3dqs_wrapctor"></a>
The Max Class Constructor/Destructor</h2>
<p>Your Max class' constructor should be similar to the standard Max wrapper constructor, but the differences worth noting are that you should pass your first normal argument, which is the rendering destination, on to your Jitter OB3D constructor, and create a second outlet for matrix output, attached to your object's OB3D data. For your destructor, there is nothing additional you need to do for OB3D. The jit.gl.simple Max class' constructor and destructor are provided as examples.</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> *max_jit_gl_simple_new(<a class="code" href="structt__symbol.html" title="The symbol.">t_symbol</a> *s, <span class="keywordtype">long</span> argc, <a class="code" href="structt__atom.html" title="An atom is a typed datum.">t_atom</a> *argv)
{
   t_max_jit_gl_simple *x;
   <span class="keywordtype">void</span> *jit_ob;
   <span class="keywordtype">long</span> attrstart;
   <a class="code" href="structt__symbol.html" title="The symbol.">t_symbol</a> *dest_name_sym = <a class="code" href="group__jitter.html#gae1fd77934399ea2966d50728ed8144c2" title="cached t_symbol">_jit_sym_nothing</a>;

   <span class="keywordflow">if</span> (x = (t_max_jit_gl_simple *) <a class="code" href="group__maxwrapmod.html#gacf7fc6f3f87db8515f61b12efbcc9073" title="Allocates an initializes a new Max wrapper object instance.">max_jit_obex_new</a>(
      max_jit_gl_simple_class, <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb" title="Given a C-string, fetch the matching t_symbol pointer from the symbol table, generating the symbol if...">gensym</a>(<span class="stringliteral">&quot;jit_gl_simple&quot;</span>))) 
   {
      <span class="comment">// get first normal arg, the destination name</span>
      attrstart = <a class="code" href="group__maxwrapmod.html#ga1a28ddf72d9bdcb2096df36384b63de6" title="Determines argument offset to first attribute argument.">max_jit_attr_args_offset</a>(argc,argv);
      <span class="keywordflow">if</span> (attrstart&amp;&amp;argv) 
      {
         <a class="code" href="group__atommod.html#ga6be2fbebadc03614cd5e621da17ff289" title="Retrieves atom argument at index as symbol pointer if present.">jit_atom_arg_getsym</a>(&amp;dest_name_sym, 0, attrstart, argv);
      }

      <span class="comment">// instantiate Jitter object with dest_name arg</span>
      <span class="keywordflow">if</span> (jit_ob = <a class="code" href="group__objectmod.html#gabde2eb49750992ec4125af862b402342" title="Instantiates an object specified by class name.">jit_object_new</a>(
         <a class="code" href="group__symbol.html#ga5d8db08b384aeb76eaee85a15f46fbcb" title="Given a C-string, fetch the matching t_symbol pointer from the symbol table, generating the symbol if...">gensym</a>(<span class="stringliteral">&quot;jit_gl_simple&quot;</span>), dest_name_sym)) 
      {
         <span class="comment">// set internal jitter object instance</span>
         <a class="code" href="group__maxwrapmod.html#gaa1b174cf92680ca46bfb189a812d2a65" title="Sets the wrapped Jitter object for a Max wrapper object.">max_jit_obex_jitob_set</a>(x, jit_ob);
         
         <span class="comment">// add a general purpose outlet (rightmost)</span>
         <a class="code" href="group__maxwrapmod.html#ga8e63a402ecf8cef78a9093c774159a9e" title="Sets the Max wrapper object&#39;s dump outlet&#39;s outlet pointer.">max_jit_obex_dumpout_set</a>(x, <a class="code" href="group__inout.html#gac25db50a2a7eb76c5e057dd907c11d44" title="Use outlet_new() to create an outlet that can send a specific non-standard message, or any message.">outlet_new</a>(x,NULL));
         
         <span class="comment">// process attribute arguments </span>
         <a class="code" href="group__maxwrapmod.html#gac1ffd4864421154c8e6364b5df9a09ff" title="Processes attribute arguments.">max_jit_attr_args</a>(x, argc, argv);      
         
         <span class="comment">// attach the jit object&#39;s ob3d to a new outlet    </span>
         <span class="comment">// this outlet is used in matrixoutput mode</span>
         <a class="code" href="group__ob3dmod.html#ga00933af2acf7bd26e6480c6e234faecd" title="Allocates and initializes OB3D Max wrapper related resources.">max_jit_ob3d_attach</a>(x, jit_ob, <a class="code" href="group__inout.html#gac25db50a2a7eb76c5e057dd907c11d44" title="Use outlet_new() to create an outlet that can send a specific non-standard message, or any message.">outlet_new</a>(x, <span class="stringliteral">&quot;jit_matrix&quot;</span>));
      } 
      <span class="keywordflow">else</span> 
      {
         <a class="code" href="group__console.html#ga8a87d2e25431900a88722759ec115757" title="Print an error to the Max window.">error</a>(<span class="stringliteral">&quot;jit.gl.simple: could not allocate object&quot;</span>);
         <a class="code" href="group__class__old.html#gadf30646e52376a37b93cc20efac65636" title="Release the memory used by a Max object.">freeobject</a>((<a class="code" href="structt__object.html" title="The structure for the head of any object which wants to have inlets or outlets, or support attributes...">t_object</a> *)x);
         x = NULL;
      }
   }
   <span class="keywordflow">return</span> (x);
}

<span class="keywordtype">void</span> max_jit_gl_simple_free(t_max_jit_gl_simple *x)
{
   <span class="comment">// lookup our internal Jitter object instance and free</span>
   <a class="code" href="group__objectmod.html#ga64970b62e5afe7a2cbd57efd6e9e9f74" title="Frees an object.">jit_object_free</a>(<a class="code" href="group__maxwrapmod.html#ga063ab88bfc92c1a666f3ad6251834e20" title="Retrieves the wrapped Jitter object from a Max wrapper object.">max_jit_obex_jitob_get</a>(x));
   
   <span class="comment">// free resources associated with our obex entry</span>
   <a class="code" href="group__maxwrapmod.html#gabcf9c466a6baa22994a66e30b54e7dd6" title="Frees additional resources for the Max wrapper object instance.">max_jit_obex_free</a>(x);
}
</pre></div> </div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

		<div id="c74footer">
			&nbsp;&nbsp;Copyright &copy; 2011, <a href="http://www.cycling74.com/">Cycling '74</a>
		</div>
	</body>
</html>
