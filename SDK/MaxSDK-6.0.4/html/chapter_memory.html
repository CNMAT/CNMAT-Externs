<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Max 6 API</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
	<div id="c74header">
		<img src="header.png" height="200" />
	</div>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('chapter_memory.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Memory Allocation </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The Max API offers cross-platform calls memory management.</p>
<p>There are two types of calls, those for pointers and those for handles. Handles are pointers to pointers, and were used in the early Mac OS to permit memory to be relocated without changing a reference, and many Mac OS API calls used handle. There are a few legacy Max API calls that use handles as well, but in general, unless the OS or Max requires the use of a handle, you're probably better off using the simpler pointer.</p>
<p>Longtime Max object programmers may have used memory calls <a class="el" href="group__memory.html#gaa513b95a076519ec168b62d85881f643" title="Allocate small amounts of non-relocatable memory.">getbytes()</a> and <a class="el" href="group__memory.html#gaa1dc485c42515917ca377dbaf15b7dcd" title="Free memory allocated with getbytes().">freebytes()</a> in the past, but all memory calls now use same underlying OS mechanisms, so while <a class="el" href="group__memory.html#gaa513b95a076519ec168b62d85881f643" title="Allocate small amounts of non-relocatable memory.">getbytes()</a> and <a class="el" href="group__memory.html#gaa1dc485c42515917ca377dbaf15b7dcd" title="Free memory allocated with getbytes().">freebytes()</a> are still supported, they are restricted to 32K of memory or less due to the arguments they use, and we recommend the use of <a class="el" href="group__memory.html#ga276676be214edff9fe5c9d0681f39ae6" title="Allocate memory.">sysmem_newptr()</a> and <a class="el" href="group__memory.html#ga200c82639e547869db1f3887d17102d3" title="Free memory allocated with sysmem_newptr().">sysmem_freeptr()</a> instead.</p>
<p>Here are some examples of allocating and freeing pointers and handles.</p>
<div class="fragment"><pre class="fragment">        <span class="keywordtype">char</span> *ptr;
        <span class="keywordtype">char</span> **hand;

        ptr = <a class="code" href="group__memory.html#ga276676be214edff9fe5c9d0681f39ae6" title="Allocate memory.">sysmem_newptr</a>(2000);
        <a class="code" href="group__console.html#ga8eebb1400d598f4423f925102d02970a" title="Print text to the Max window.">post</a>(<span class="stringliteral">&quot;I have a pointer %lx and it is %ld bytes in size&quot;</span>,ptr, <a class="code" href="group__memory.html#ga4f847713a1bd083030d60e8752d7c28d" title="Find the size of a pointer.">sysmem_ptrsize</a>(ptr));
        ptr = <a class="code" href="group__memory.html#gaf458ca679d665984dbaa8125c88a417e" title="Resize an existing pointer and clear it.">sysmem_resizeptrclear</a>(ptr, 3000);
        <a class="code" href="group__console.html#ga8eebb1400d598f4423f925102d02970a" title="Print text to the Max window.">post</a>(<span class="stringliteral">&quot;Now I have a pointer %lx and it is %ld bytes in size&quot;</span>,ptr, <a class="code" href="group__memory.html#ga4f847713a1bd083030d60e8752d7c28d" title="Find the size of a pointer.">sysmem_ptrsize</a>(ptr));
        <a class="code" href="group__memory.html#ga200c82639e547869db1f3887d17102d3" title="Free memory allocated with sysmem_newptr().">sysmem_freeptr</a>(ptr);

        hand = <a class="code" href="group__memory.html#gacdacfad4785c71dc8c4ce5d4d9714d54" title="Allocate a handle (a pointer to a pointer).">sysmem_newhandle</a>(2000);
        <a class="code" href="group__console.html#ga8eebb1400d598f4423f925102d02970a" title="Print text to the Max window.">post</a>(<span class="stringliteral">&quot;I have a handle %lx and it is %ld bytes in size&quot;</span>,hand, <a class="code" href="group__memory.html#ga84cf5e5a070edef2834faf3b7beed5fe" title="Find the size of a handle.">sysmem_handlesize</a>(hand));
        <a class="code" href="group__memory.html#ga420520dda6015ec33876b18b860083dd" title="Resize an existing handle.">sysmem_resizehandle</a>(hand, 3000);
        <a class="code" href="group__console.html#ga8eebb1400d598f4423f925102d02970a" title="Print text to the Max window.">post</a>(<span class="stringliteral">&quot;Now the handle %lx is %ld bytes in size&quot;</span>,hand, <a class="code" href="group__memory.html#ga4f847713a1bd083030d60e8752d7c28d" title="Find the size of a pointer.">sysmem_ptrsize</a>(hand));
        <a class="code" href="group__memory.html#ga5815994f7d02b77c24f8c684df9acd83" title="Free memory allocated with sysmem_newhandle().">sysmem_freehandle</a>(hand);
</pre></div> </div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

		<div id="c74footer">
			&nbsp;&nbsp;Copyright &copy; 2011, <a href="http://www.cycling74.com/">Cycling '74</a>
		</div>
	</body>
</html>
