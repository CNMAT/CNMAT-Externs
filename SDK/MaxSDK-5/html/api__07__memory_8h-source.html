<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<title>Max5 API Reference</title>
		<link href="c74-doxygen.css" rel="stylesheet" type="text/css">
	</head>
	<body>

		<div id="c74header">
			<img src="max5.png" />
			<p>Max 5 API Reference</p>
		</div>

<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>api_07_memory.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/** </span>
<a name="l00002"></a>00002 <span class="comment">    @page chapter_memory Memory Allocation</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">    The Max API offers cross-platform calls memory management. There are two types of calls, those for pointers and those for handles. Handles are pointers to pointers, and were used in the early Mac OS to permit memory to be relocated without changing a reference, and many Mac OS API calls used handle. There are a few legacy Max API calls that use handles as well, but in general, unless the OS or Max requires the use of a handle, you're probably better off using the simpler pointer.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">    Longtime Max object programmers may have used memory calls getbytes() and freebytes() in the past, but all memory calls now use same underlying OS mechanisms, so while getbytes() and freebytes() are still supported, they are restricted to 32K of memory or less due to the arguments they use, and we recommend the use of sysmem_newptr() and sysmem_freeptr() instead.</span>
<a name="l00007"></a>00007 <span class="comment"> </span>
<a name="l00008"></a>00008 <span class="comment"> </span>
<a name="l00009"></a>00009 <span class="comment">    Here are some examples of allocating and freeing pointers and handles.</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">@code</span>
<a name="l00012"></a>00012 <span class="comment">        char *ptr;</span>
<a name="l00013"></a>00013 <span class="comment">        char **hand;</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">        ptr = sysmem_newptr(2000);</span>
<a name="l00016"></a>00016 <span class="comment">        post("I have a pointer %lx and it is %ld bytes in size",ptr, sysmem_ptrsize(ptr));</span>
<a name="l00017"></a>00017 <span class="comment">        ptr = sysmem_resizeptrclear(ptr, 3000);</span>
<a name="l00018"></a>00018 <span class="comment">        post("Now I have a pointer %lx and it is %ld bytes in size",ptr, sysmem_ptrsize(ptr));</span>
<a name="l00019"></a>00019 <span class="comment">        sysmem_freeptr(ptr);</span>
<a name="l00020"></a>00020 <span class="comment"></span>
<a name="l00021"></a>00021 <span class="comment">        hand = sysmem_newhandle(2000);</span>
<a name="l00022"></a>00022 <span class="comment">        post("I have a handle %lx and it is %ld bytes in size",hand, sysmem_handlesize(hand));</span>
<a name="l00023"></a>00023 <span class="comment">        sysmem_resizehandle(hand, 3000);</span>
<a name="l00024"></a>00024 <span class="comment">        post("Now the handle %lx is %ld bytes in size",hand, sysmem_ptrsize(hand));</span>
<a name="l00025"></a>00025 <span class="comment">        sysmem_freehandle(hand);</span>
<a name="l00026"></a>00026 <span class="comment">@endcode</span>
<a name="l00027"></a>00027 <span class="comment"></span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="comment">*/</span>
</pre></div></div>
		<div id="c74footer">
			<p>Copyright &copy; 2008, <a href="http://www.cycling74.com/">Cycling '74</a></p>
		</div>
	</body>
</html>
