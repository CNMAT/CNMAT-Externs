<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<c74object name="bench~" module="CNMAT-Externals">

    <digest>
	Simple benchmarking utility for signals.
    </digest>

    <description>
	bench~ outputs a signal, representing how long it takes to compute a given MSP network that falls between its input and its output, utilizing your CPU's cycle counter for reference.  You employ bench~ by instantiating two copies of it - one for the <i>input</i> to be measured, and one for the <i>output</i>.  There <i>must</i> be two separate bench~ objects, similar to Max's <m>tapin~</m> and <m>tapout~</m> objects.  When signal arrives in the left inlet of an <i>input</i> bench~ object, the <i>input</i> object outputs a reference <m>signal</m> out the right outlet, which should be connected to the right inlet of the <i>output</i> object.  The <i>output</i> object simply stores that <m>signal</m>.  The <i>input</i> object then outputs the <m>signal</m> out the left outlet, which presumably will have said network attached, and which occupy some time to process.  Once this process has been computed, the resultant signal is assessed at the <i>output</i> object's left inlet, which will consequentially check the current time vs the input time, and output the difference (as a signal).  The output of the <i>output</i> bench~ object is a measurement in milliseconds: a record of how long it took to perform a task between the input and the output.
    </description>

    <!--METADATA-->
    <metadatalist>
	<metadata name="author">CNMAT</metadata>
	<metadata name="tag">CNMAT-Externals</metadata>
	<metadata name="tag">benchmarking</metadata>
    </metadatalist>

    <!--INLETS-->
    <inletlist>
    </inletlist>

    <!--OUTLETS-->
    <outletlist>
    </outletlist>

    <!--ARGUMENTS-->
    <objarglist>
	<objarg name="type" optional="0" type="symbol">
	    <description>
		The object's communication type.  This must be either the word "in" or "out", indicating which use case you would like the object to adhere to.
	    </description>
	</objarg>
	<objarg name="function" optional="1" type="symbol">
	    <description>
		A word indicating whether or not the object will pass the MSP signal through </b>
		Possible options:  'true', '<nothing>'
	    </description>
	</objarg>
    </objarglist>

    <!--MESSAGES-->
    <methodlist>

	<method name="anything">
	    <arglist>
	    </arglist>
	    <description>
		Any message can be input into bench to analyze peformance.
	    </description>
	</method>

	<method name="bang">
	    <description>
		Measure the time between the time just measured (as of the bang) and the stored time of another event (time is stored in the right inlet, using a timestamp from another bench object).
	    </description>
	</method>
	    
	<method name="version">
	    <description>
		Prints the current build's version information to the Max Window.
	    </description>
	</method>

    </methodlist>

    <!--DISCUSSION-->
    <discussion>
    </discussion>

    <!--SEEALSO-->
    <seealsolist>
	<seealso name="randdist" />
    </seealsolist>

    <misc name = "Input">
	<entry name ="Inlet 1 [anything]">
	    <description>
		The first inlet of bench accepts any message.
	    </description>
	</entry>
	<entry name ="Inlet 2 [list]">
	    <description>
		Input a timestamp corresponding to a specific event to be measured.  This list should be generated by another <m>bench</m> object.
	    </description>
	</entry>
    </misc>

    <misc name = "Output">
	<entry name ="Outlet 1 [float]">
	    <description>
		Outputs a float value, indicating the measured time in milliseconds between input and output.
	    </description>
	</entry>
    </misc>

    <misc name = "Discussion">
	<entry name ="More details">
	    <description>
	    </description>
	</entry>
	<entry name ="Keywords">
	    <description>
		benchmark, bench, CNMAT
	    </description>
	</entry>
    </misc>

</c74object>
